{% if recommendations %}
<section class="recommendations-section">
  <div class="section-header">
    <h2>âœ¨ Special for You</h2>
    <p class="subtitle">AI strategy: {{ strategy }}</p>
    <p class="subtitle">Selected based on your favorite brands</p>
    <p class="subtitle">
      Recommendations generated by AI based on similarities with other customers.
    </p>
  </div>
  <div class="product-gallery">
    {% for product in recommendations %}
    <div class="product-card" data-product-id="{{ product.id }}">
      <img
        src="{{ url_for('static', filename=product.image_url) }}"
        alt="{{ product.name }}"
      />
      <div class="product-details">
        <h2>{{ product.name }}</h2>
        <p class="brand">{{ product.brand }}</p>
        <p class="price">${{ product.price }}</p>
        <p class="description">{{ product.description }}</p>
        {% if product.color or product.material or product.purpose %}
        <div class="product-specs">
          {% if product.color %}<span class="spec">Color: {{ product.color }}</span>{% endif %}
          {% if product.material %}<span class="spec">Material: {{ product.material }}</span>{% endif %}
          {% if product.purpose %}<span class="spec">Purpose: {{ product.purpose }}</span>{% endif %}
        </div>
        {% endif %}
        {% if current_user.is_authenticated %}
        <form
          action="{{ url_for('cart.add_to_cart', product_id=product.id) }}"
          method="POST"
          class="add-to-cart-form"
          data-product-id="{{ product.id }}"
          data-source="recommendation"
          data-strategy="{{ strategy }}"
        >
          <button type="submit" class="btn-add-to-cart">Add to Cart</button>
        </form>
        {% else %}
        <p class="login-prompt">
          <a href="{{ url_for('auth.login') }}">Log in to add to cart</a>
        </p>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</section>
{% endif %}
